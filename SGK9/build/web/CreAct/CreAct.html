<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->

<div id="services" class="informesForm" style="padding-top: 200px; padding-bottom: 200px;">
    <form method="post">
    <center><input id="inpInforme" placeholder="Informe" type="text" onkeypress="presionaEnter2(event);" required="required"/>
<h3>POLICIA MUNICIPAL DE HEREDIA</h3>

            <h3>ACTA DE DECOMISO, SECUESTRO O HALLAZGO</h3>




<div id="compdiv" style="display:inline-block; margin-top: 5px;  overflow:auto; font-size:10px; font-weight:700; width:1200px">





                    <p>Los suscritos oficial de la policia municipal en cumplimiento de lo expresamente dispues en la ley general del policia N`7410 el codigo y el codigo procesal penal procedemos</p>

                    <p> a confeccionar la presente acta:</p>

                    <center>

                      <table id ="ubicacionTable" class="GRID">



                      </table>

                    </center>

                    <p>Se procede a decomisar a quien dice llamarse:</p>



                    <center>

                      <table id ="interesadoTable" class="GRID">



                      </table>

                    </center>

                    <p>Lo que a continuacion se detalla: (describa en que consiste la evidencia y la ubicacion original si la portaba o no)</p>

                    <center>

                      <textarea id="textDetalles" rows="10" cols="124" class="input">



                      </textarea>

                    </center>

    </div>
            <button id="bEnviar" type="submit" class="btn" onclick="enviar();">Enviar</button>
                </center>
      </form>
    </div>
  

<script>

        document.addEventListener("DOMContentLoaded", pageLoad);



        function pageLoad(){

            ubicacionTable = document.getElementById("ubicacionTable");

            //ubicacionTable.toCell=ubicacionTable_toCell;



            row = document.createElement('tr');

            //textBox.style.width = "400px";

            //textBox.style.height = "23px";

            generate_tableRow(ubicacionTable, "UBICACION");



            generate_tableCell(ubicacionTable,row,"Fecha del suceso",false,false);

            generate_tableCell(ubicacionTable,row,"Hora del suceso",false,false);

            generate_tableCell(ubicacionTable,row,"Provincia",false,false);

            generate_tableCell(ubicacionTable,row,"Canton",false,false);

            generate_tableCell(ubicacionTable,row,"Distrito",false,false);

            generate_tableCell(ubicacionTable,row,"Barrio y/o Avenida - Calle",false,false);



            row = document.createElement('tr');



            textBox_FechaSuceso = document.createElement('input');
            textBox_FechaSuceso.required = "required";

            textBox_HoraSuceso = document.createElement('input');
            textBox_HoraSuceso.required = "required";

            textBox_Provincia = document.createElement('input');
            textBox_Provincia.required = "required";

            textBox_Canton = document.createElement('input');
            textBox_Canton.required = "required";

            textBox_Distrito = document.createElement('input');
            textBox_Distrito.required = "required";

            textBox_Barrio = document.createElement('input');
            textBox_Barrio.required = "required";



            generate_tableCell(ubicacionTable,row,textBox_FechaSuceso,false,true);

            generate_tableCell(ubicacionTable,row,textBox_HoraSuceso,false,true);

            generate_tableCell(ubicacionTable,row,textBox_Provincia,false,true);

            generate_tableCell(ubicacionTable,row,textBox_Canton,false,true);

            generate_tableCell(ubicacionTable,row,textBox_Distrito,false,true);

            generate_tableCell(ubicacionTable,row,textBox_Barrio,false,true);



            row = document.createElement('tr');



            textBox_DireccionSuceso = document.createElement('input');

            textBox_DireccionSuceso.style.width = "600px";

            textBox_DireccionSuceso.style.height = "23px";



            generate_tableCell(ubicacionTable,row,"Direccion Exacta del suceso",false,false);

            generate_tableCell(ubicacionTable,row,textBox_DireccionSuceso,false,true);

            textBox_DireccionSuceso.parentNode.colSpan = "5";



            row = document.createElement('tr');



            textBox_TipoLugar = document.createElement('input');

            textBox_TipoLugar.style.width = "600px";

            textBox_TipoLugar.style.height = "23px";



            generate_tableCell(ubicacionTable,row,"Tipo de Lugar (Via publica, casa, local comercial, etc)",false,false);

            generate_tableCell(ubicacionTable,row,textBox_TipoLugar,false,true);

            textBox_TipoLugar.parentNode.colSpan = "5";



            row = document.createElement('tr');



            generate_tableCell(interesadoTable,row,"   ___  ",true,false);

            generate_tableCell(interesadoTable,row,"NOMBRE",true,false);

            //row.childNode[0].colSpan = "2";

            generate_tableCell(interesadoTable,row,"CEDULA",true,false);

            generate_tableCell(interesadoTable,row,"SEXO",true,false);

            generate_tableCell(interesadoTable,row,"EDAD",true,false);

            generate_tableCell(interesadoTable,row,"NACIONALIDAD",true,false);

            generate_tableCell(interesadoTable,row,"FECHA DE NACIMIENTO",true,false);



            row.childNodes[1].style.width = "300px";



            row = document.createElement('tr');



            textBox_Nombre = document.createElement('input');

            textBox_Cedula = document.createElement('input');
            
            textBox_Cedula.onkeypress = function(){presionaEnter(event);};

            textBox_Sexo = document.createElement('input');

            textBox_Edad = document.createElement('input');

            textBox_Nacionalidad = document.createElement('input');

            textBox_FechaNacimiento = document.createElement('input');



            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,textBox_Nombre,false,true);

            generate_tableCell(interesadoTable,row,textBox_Cedula,false,true);

            generate_tableCell(interesadoTable,row,textBox_Sexo,false,true);

            generate_tableCell(interesadoTable,row,textBox_Edad,false,true);

            generate_tableCell(interesadoTable,row,textBox_Nacionalidad,false,true);

            generate_tableCell(interesadoTable,row,textBox_FechaNacimiento,false,true);



            row = document.createElement('tr');



            textBox_DireccionExacta = document.createElement('input');

            textBox_DireccionExacta.style.width = "540px";



            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,"DIRECCION EXACTA Y TELEFONO",false,false);

            generate_tableCell(interesadoTable,row,textBox_DireccionExacta,false,true);

            //console.log(row.childNodes[2]);

            row.childNodes[2].colSpan = "5";



            row = document.createElement('tr');



            textBox_telefono = document.createElement('input');

            textBox_telefono.style.width = "100px";



            textBox_conocidoComo = document.createElement('input');

            checkBox_firma = document.createElement('input');

            checkBox_firma.setAttribute("type", "checkbox");



            checkBox_NoSabeFirmar = document.createElement('input');

            checkBox_NoSabeFirmar.setAttribute("type", "checkbox");



            textBox_conocidoComo.style.width = "208px";



            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,textBox_telefono,false,true);

            generate_tableCell(interesadoTable,row,"CONOCIDO COMO:",false,false);

            generate_tableCell(interesadoTable,row,textBox_conocidoComo,false,true);

            generate_tableCell(interesadoTable,row,checkBox_firma,false,true);

            generate_tableCell(interesadoTable,row,checkBox_NoSabeFirmar,false,true);





            //console.log(row.childNodes[2]);

            row.childNodes[1].colSpan = "1";

            row.childNodes[1].style.width = "200px";

            row.childNodes[3].colSpan = "2";

            row.childNodes[4].appendChild(document.createTextNode("No quiere firmar"));

            row.childNodes[4].style.width = "80px";



            row.childNodes[5].appendChild(document.createTextNode("No sabe firmar"));

            row.childNodes[5].style.width = "80px";

            //row.childNodes[4].value = "Firma";





            row = document.createElement('tr');



            textBox_vestimenta = document.createElement('input');

            textBox_vestimenta.style.width = "500px";





            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,"VESTIMENTA:",false,false);

            generate_tableCell(interesadoTable,row,textBox_vestimenta,false,true);



            row.childNodes[2].colSpan = "5";





            row = document.createElement('tr');



            generate_tableCell(interesadoTable,row,"   ",true,false);

            generate_tableCell(interesadoTable,row,"NOMBRE",true,false);

            //row.childNode[0].colSpan = "2";

            generate_tableCell(interesadoTable,row,"CEDULA",true,false);

            generate_tableCell(interesadoTable,row,"SEXO",true,false);

            generate_tableCell(interesadoTable,row,"EDAD",true,false);

            generate_tableCell(interesadoTable,row,"NACIONALIDAD",true,false);

            generate_tableCell(interesadoTable,row,"FECHA DE NACIMIENTO",true,false);



            row.childNodes[1].style.width = "300px";



            row = document.createElement('tr');



            textBox_Nombre2 = document.createElement('input');

            textBox_Cedula2 = document.createElement('input');

            textBox_Sexo2 = document.createElement('input');

            textBox_Edad2 = document.createElement('input');

            textBox_Nacionalidad2 = document.createElement('input');

            textBox_FechaNacimiento2 = document.createElement('input');



            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,textBox_Nombre2,false,true);

            generate_tableCell(interesadoTable,row,textBox_Cedula2,false,true);

            generate_tableCell(interesadoTable,row,textBox_Sexo2,false,true);

            generate_tableCell(interesadoTable,row,textBox_Edad2,false,true);

            generate_tableCell(interesadoTable,row,textBox_Nacionalidad2,false,true);

            generate_tableCell(interesadoTable,row,textBox_FechaNacimiento2,false,true);



            row = document.createElement('tr');



            textBox_DireccionExacta2 = document.createElement('input');

            textBox_DireccionExacta2.style.width = "540px";



            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,"DIRECCION EXACTA Y TELEFONO",false,false);

            generate_tableCell(interesadoTable,row,textBox_DireccionExacta2,false,true);

            //console.log(row.childNodes[2]);

            row.childNodes[2].colSpan = "5";



            row = document.createElement('tr');



            textBox_telefono2 = document.createElement('input');

            textBox_telefono2.style.width = "100px";



            textBox_conocidoComo2 = document.createElement('input');

            checkBox_firma2 = document.createElement('input');

            checkBox_firma2.setAttribute("type", "checkbox");



            checkBox_NoSabeFirmar2 = document.createElement('input');

            checkBox_NoSabeFirmar2.setAttribute("type", "checkbox");



            textBox_conocidoComo2.style.width = "208px";



            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,textBox_telefono2,false,true);

            generate_tableCell(interesadoTable,row,"CONOCIDO COMO:",false,false);

            generate_tableCell(interesadoTable,row,textBox_conocidoComo2,false,true);

            generate_tableCell(interesadoTable,row,checkBox_firma2,false,true);

            generate_tableCell(interesadoTable,row,checkBox_NoSabeFirmar2,false,true);





            //console.log(row.childNodes[2]);

            row.childNodes[1].colSpan = "1";

            row.childNodes[1].style.width = "200px";

            row.childNodes[3].colSpan = "2";

            row.childNodes[4].appendChild(document.createTextNode("No quiere firmar"));

            row.childNodes[4].style.width = "80px";



            row.childNodes[5].appendChild(document.createTextNode("No sabe firmar"));

            row.childNodes[5].style.width = "80px";

            //row.childNodes[4].value = "Firma";





            row = document.createElement('tr');



            textBox_vestimenta2 = document.createElement('input');

            textBox_vestimenta2.style.width = "500px";





            generate_tableCell(interesadoTable,row,"    ",true,false);

            generate_tableCell(interesadoTable,row,"VESTIMENTA:",false,false);

            generate_tableCell(interesadoTable,row,textBox_vestimenta2,false,true);



            row.childNodes[2].colSpan = "5";

        }



        function ubicacionTable_toCell(obj,colIdx){

            switch(colIdx){

                case 0:

                    content=document.createTextNode();

                    return content;

                case 1:

                    content=document.createTextNode();

                    return content;

                case 2:

                    content=document.createTextNode();

                    return content;

                };

                return null;

        }
        
        
        function cargaPersona(){
            if(textBox_Cedula.value != "" && textBox_Cedula.value!==null){
                Proxy.getPersona(textBox_Cedula.value,
                function(persona){
                    if(typeof persona.cedula !== "undefined"){
                        textBox_Nombre.value = persona.nombre +" "+ persona.apellido1 +" "+  persona.apellido2;
                        textBox_Cedula.value = persona.cedula;
                        textBox_Sexo.value = persona.sexo;
                        textBox_Edad.value = persona.edad;
                        textBox_Nacionalidad.value = persona.nacionalidad;
                        textBox_FechaNacimiento.value = persona.nacimiento;
                    }
                }
                );
            }
        }
        
        function cargaSitio(){
            if(document.getElementById("inpInforme").value != "" && document.getElementById("inpInforme").value!==null){
                Proxy.getSitio(document.getElementById("inpInforme").value,
                function(sitio){
                    if(typeof sitio.informe !== "undefined"){
                        textBox_FechaSuceso.value = sitio.fecha;
                        textBox_HoraSuceso.value = sitio.hora;
                        textBox_Provincia.value = sitio.provincia;
                        textBox_Canton.value = sitio.canton;
                        textBox_Distrito.value = sitio.distrito;
                        textBox_Barrio.value = sitio.barrio;
                        textBox_DireccionSuceso.value = sitio.direccion;
                        textBox_TipoLugar.value = sitio.lugar;
                    }
                }
                );
            }
        }
        
        function cargaImputado(){
            if(textBox_Cedula.value != "" && textBox_Cedula.value!==null){
                Proxy.getImputadoXInfCed(document.getElementById("inpInforme").value,textBox_Cedula.value,
                function(imputado){
                    if(typeof imputado.persona !== "undefined"){
                        textBox_DireccionExacta.value = imputado.direccion;
                        textBox_telefono.value = imputado.telefono;
                        textBox_conocidoComo.value = imputado.alias;
                        if(imputado.motivo_sinfirma === "no quiso"){
                            checkBox_firma.checked = true;
                        }else{
                            checkBox_firma.checked = false;
                        }
                        if(imputado.motivo_sinfirma === "no sabe"){
                            checkBox_NoSabeFirmar = true;
                        }else{
                            checkBox_NoSabeFirmar.checked = false;
                        }
                        //checkBox_firma = imputado.motivo_sinfirma;
                        //checkBox_NoSabeFirmar = imputado
                        textBox_vestimenta.value = imputado.vestimenta;
                        
                        
                        Proxy.getPersona(textBox_Cedula.value,
                        function(persona){
                            if(typeof persona.cedula !== "undefined"){
                                textBox_Nombre.value = persona.nombre +" "+ persona.apellido1 +" "+  persona.apellido2;
                                textBox_Cedula.value = persona.cedula;
                                textBox_Sexo.value = persona.sexo;
                                textBox_Edad.value = persona.edad;
                                textBox_Nacionalidad.value = persona.nacionalidad;
                                textBox_FechaNacimiento.value = persona.nacimiento;
                            }
                        }
                        );
                        
                    }
                }
                );
                
            }
        }
        
        
        function presionaEnter(e){
        if(e.keyCode === 13){
            e.preventDefault(); 
            cargaImputado();
        }
    }
    
    function presionaEnter2(e){
        if(e.keyCode === 13){
            e.preventDefault(); 
            cargaSitio();
        }
    }


        function enviar(){
            if(validar()){
            /*var sitio = new Sitio("1",
            textBox_FechaSuceso.value,
            textBox_HoraSuceso.value,
            textBox_Provincia.value,
            textBox_Canton.value,
            textBox_Distrito.value,
            textBox_Barrio.value,
            textBox_DireccionSuceso.value,
            textBox_TipoLugar.value);
            
            
            
            alert(JSON.stringify(sitio,replacer));*/
            //alert("Acta creada!");
            guardaActa();
            document.location = "#!/Informes";
        }
    }
    
    function guardaActa(){
        acta = new Acta("1",document.getElementById("inpInforme").value,document.getElementById("textDetalles").value);
        Proxy.insActa(acta,textBox_Cedula.value,function(resp){
            switch(resp){
                case 0:
                    alert("Acta Creada");
                    break;
                case 1:
                    alert("error");
                    break;
            }
        });
    }
    
    function validar(){
        if(textBox_FechaSuceso.value === "" ||
                        textBox_HoraSuceso.value === "" ||
                        textBox_Provincia.value === "" ||
                        textBox_Canton.value === "" ||
                        textBox_Distrito.value === "" ||
                        textBox_Barrio.value === "" ||
                        textBox_DireccionSuceso.value === "" ||
                        textBox_TipoLugar.value === "" ||
                        textBox_Nombre.value === "" ||
                                textBox_Cedula.value  === "" ||
                                textBox_Sexo.value  === "" ||
                                textBox_Edad.value  === "" ||
                                textBox_Nacionalidad.value  === "" ||
                                textBox_FechaNacimiento.value  === "" ||
                                trimfield(document.getElementById("textDetalles").value) == ''){
            return false;
        }
        return true;
    }
    
    /*function trimAll(sString)
    {
        while (sString.substring(0,1) === ' ')
        {
            sString = sString.substring(1, sString.length);
        }
        while (sString.substring(sString.length-1, sString.length) === ' ')
        {
            sString = sString.substring(0,sString.length-1);
        }
        alert(sString);
        return sString;
    }*/
    
    function trimfield(str) 
{ 
    return str.replace(/^\s+|\s+$/g,''); 
}
    

</script>